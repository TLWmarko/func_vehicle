<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=MXVwpSGzOOhqOc5hUWJbBLizfYjsfH9XaeDpmRKYJN5bV0WvE1cEyAoIq5yYZlSc');ol{margin:0;padding:0}table td,table th{padding:0}.c25{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:294.8pt;border-top-color:#000000;border-bottom-style:solid}.c19{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:318.8pt;border-top-color:#000000;border-bottom-style:solid}.c14{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:429pt;border-top-color:#000000;border-bottom-style:solid}.c26{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:431.2pt;border-top-color:#000000;border-bottom-style:solid}.c21{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:162.8pt;border-top-color:#000000;border-bottom-style:solid}.c18{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:378.8pt;border-top-color:#000000;border-bottom-style:solid}.c12{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:429.8pt;border-top-color:#000000;border-bottom-style:solid}.c20{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:393.8pt;border-top-color:#000000;border-bottom-style:solid}.c6{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:268.5pt;border-top-color:#000000;border-bottom-style:solid}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c23{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:26pt;font-family:"Arial";font-style:normal}.c24{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Roboto Mono";font-style:normal}.c7{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Roboto Mono";font-style:normal}.c9{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c28{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c8{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Roboto Mono";font-style:normal}.c16{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c5{-webkit-text-decoration-skip:none;font-weight:700;text-decoration:line-through;text-decoration-skip-ink:none;font-size:9pt;font-family:"Roboto Mono"}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c15{border-spacing:0;border-collapse:collapse;margin-right:auto}.c11{font-size:9pt;font-family:"Roboto Mono";font-weight:700}.c4{font-size:9pt;font-family:"Roboto Mono";font-weight:400}.c17{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c13{height:11pt}.c27{font-style:italic}.c10{height:0pt}.c22{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c17 doc-content"><p class="c16 title" id="h.ybaexzawxma4"><span class="c23">func_vehicle</span></p><h2 class="c28" id="h.cv3l656hn6n7"><span class="c9">How to implement func_vehicle 0.1 in Copper 1.20</span></h2><p class="c2"><span class="c8"></span></p><p class="c3"><span>func_vehicle comes with 6 new .qc files, one of which is actually from copper, namely maths.qc. This means we need to skip adding the included maths.qc file, but do add the other 5 files into </span><span class="c22">progs.src</span><span class="c8">&nbsp;thusly:</span></p><a id="t.a024b9593a8ff9976dfc68a3b6509c0189f56641"></a><a id="t.0"></a><table class="c15"><tr class="c10"><td class="c21" colspan="1" rowspan="1"><p class="c3"><span class="c0">...</span></p><p class="c3"><span class="c0">maths.qc</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c7">phys_defs.qc</span></p><p class="c3"><span class="c7">phys_matrix.qc</span></p><p class="c3"><span class="c7">phys_exec.qc</span></p><p class="c2"><span class="c7"></span></p><p class="c3"><span class="c7">func_vehicle.qc</span></p><p class="c3"><span class="c7">func_vehicle_builtins.qc</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">utility.qc</span></p><p class="c3"><span class="c0">subs.qc</span></p><p class="c3"><span class="c4">...</span></p></td></tr></table><p class="c3"><span class="c8">Now we have the vehicle stuff included in the game, next we need to add interactions between the vehicle(s) and the rest.</span></p><p class="c2"><span class="c8"></span></p><p class="c3"><span>First we want to add some functionality to </span><span class="c22">client.qc</span><span class="c8">&nbsp;for driving and entering/exiting the vehicle. In PutClientInServer, right below the setmodel stuff, add this:</span></p><a id="t.bdd7a1770a9f4a3db27c5d57b6c4002b2ddf6ffb"></a><a id="t.1"></a><table class="c15"><tr class="c10"><td class="c25" colspan="1" rowspan="1"><p class="c3"><span class="c0">...</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setmodel (self, &quot;progs/player.mdl&quot;);</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modelindex_player = self.modelindex;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setmodel (self, &quot;progs/null.spr&quot;);</span></p><p class="c3"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modelindex_null = self.modelindex;</span></p><p class="c2"><span class="c7"></span></p><p class="c3"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stuffcmd(self, &quot;chase_active 0\n&quot;);</span></p><p class="c3"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stuffcmd(self, &quot;crosshair 1\n&quot;);</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setsize (self, VEC_HULL_MIN, VEC_HULL_MAX);</span></p><p class="c3"><span class="c0">...</span></p></td></tr></table><p class="c3"><span class="c8">This is for allowing the player model to be invisible when seated, and resets the chasecam if a player stops playing while seated in a vehicle.</span></p><p class="c2"><span class="c8"></span></p><p class="c3"><span>Still in </span><span class="c22">client.qc</span><span class="c8">, move down to PlayerPostThink, and add this under CheckPowerups:</span></p><a id="t.b78f4270c210463d79fb49c8263cfda451bb0fb0"></a><a id="t.2"></a><table class="c15"><tr class="c10"><td class="c19" colspan="1" rowspan="1"><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CheckPowerups ();</span></p><p class="c1 c13"><span class="c0"></span></p><p class="c1"><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7">TryUpdateVehicle();</span></p><p class="c1 c13"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (self.movetype != MOVETYPE_NOCLIP)</span></p><p class="c1"><span class="c0">...</span></p></td></tr></table><p class="c3"><span class="c8">This handles the driving when seated in a vehicle.</span></p><p class="c2"><span class="c8"></span></p><p class="c3"><span>When the player dies, they need to get tossed out from the vehicle. Open up </span><span class="c22">player.qc</span><span class="c8">&nbsp;and navigate to PlayerDie to add this:</span></p><a id="t.211c4f559b84b25ea6ef09bf656bd656680ba991"></a><a id="t.3"></a><table class="c15"><tr class="c10"><td class="c26" colspan="1" rowspan="1"><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">void() PlayerDie =</span></p><p class="c1"><span class="c0">{</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i;</span></p><p class="c1 c13"><span class="c0"></span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (self.driving)</span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Car_AttachToVehicle(self, self.driving); // will jump out from vehicle immediately</span></p><p class="c1 c13"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.items = self.items - (self.items &amp; IT_INVISIBILITY);</span></p><p class="c1"><span class="c0">...</span></p></td></tr></table><p class="c2"><span class="c8"></span></p><p class="c3"><span>Next up we need to add a new impulse so players can enter and exit nearby vehicles. Open up </span><span class="c22">impulse.qc</span><span class="c8">&nbsp;and navigate to ImpulseCommands to add the following:</span></p><a id="t.e33a86319f6bc62b879e51d72be05e3facd25e94"></a><a id="t.4"></a><table class="c15"><tr class="c10"><td class="c6" colspan="1" rowspan="1"><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 12:</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CycleWeaponReverseCommand();</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 50:</span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Car_CheckAttach ();</span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></p><p class="c1"><span class="c0">/*</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// ai_nav</span></p><p class="c1"><span class="c0">...</span></p></td></tr></table><p class="c2"><span class="c8"></span></p><p class="c3"><span class="c8">You&rsquo;ve successfully added the basic functionality for entering, exiting and driving vehicles! Keep going if you also want to add the ability for monsters to detect you inside a vehicle and shoot at you.</span></p><p class="c2"><span class="c8"></span></p><p class="c3"><span>In </span><span class="c22">ai.qc</span><span class="c8">, put this into visible:</span></p><a id="t.b7b7bc1e7b8e97474e98bbb3b48d1a56e3d0b396"></a><a id="t.5"></a><table class="c15"><tr class="c10"><td class="c20" colspan="1" rowspan="1"><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_inopen &amp;&amp; trace_inwater)</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return FALSE; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// sight line crossed contents</span></p><p class="c1 c13"><span class="c0"></span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_fraction &lt; 1 &amp;&amp; trace_ent.owner.driving == targ)</span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return TRUE;</span></p><p class="c1 c13"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_fraction == 1)</span></p><p class="c1"><span class="c0">...</span></p></td></tr></table><p class="c3"><span class="c8">This way monsters can detect players in cars.</span></p><p class="c2"><span class="c8"></span></p><p class="c3"><span>Still in </span><span class="c22">ai.qc</span><span class="c8">&nbsp;we need to add the following to CheckClearAttack:</span></p><a id="t.008571cae0681afee4f5cd87e6412de97e7c1d73"></a><a id="t.6"></a><table class="c15"><tr class="c10"><td class="c18" colspan="1" rowspan="1"><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_ent != self.enemy)</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_ent.classname == &quot;player&quot;)</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return TRUE; &nbsp; &nbsp;// go ahead and hit a player</span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_ent.owner.driving == self.enemy)</span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return TRUE;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return FALSE; &nbsp; &nbsp;// don&#39;t have a clear shot</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c1"><span class="c0">...</span></p></td></tr></table><p class="c3"><span class="c8">This allows monsters to fight vehicles.</span></p><p class="c2"><span class="c8"></span></p><p class="c3"><span>Another change in </span><span class="c22">ai.qc</span><span class="c8">&nbsp;is we need to remove the following from FilterTarget:</span></p><a id="t.dac94bbee470391b50229357ed7995bde83a0649"></a><a id="t.7"></a><table class="c15"><tr class="c10"><td class="c14" colspan="1" rowspan="1"><p class="c1"><span class="c0">float(entity client) FilterTarget =</span></p><p class="c1"><span class="c0">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; if (client.flags &amp; FL_NOTARGET</span><span class="c5">&nbsp;|| client.movetype == MOVETYPE_NOCLIP</span><span class="c0">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return FALSE;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (client.health &lt;= 0 || client.deadflag)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return FALSE;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (client.customflags &amp; (CFL_PLUNGE|CFL_LIMBO))</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return FALSE;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (range(client) == RANGE_TOOFAR)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return FALSE;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; return TRUE;</span></p><p class="c1"><span class="c0">}</span></p></td></tr></table><p class="c3"><span class="c8">This is because the player is using MOVETYPE_NOCLIP when inside a vehicle.</span></p><p class="c2"><span class="c8"></span></p><p class="c3"><span>In </span><span class="c22">combat.qc</span><span class="c8">, navigate to T_RadiusMultiDamage, and change this part:</span></p><a id="t.27a213e7aa35b64b96a48d02da651339e3b04d64"></a><a id="t.8"></a><table class="c15"><tr class="c10"><td class="c14" colspan="1" rowspan="1"><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (points &gt; 0)</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T_RadiusDamageCheck(inflictor, attacker, head, points, multi);</span></p></td></tr></table><p class="c3"><span class="c8">Into this:</span></p><a id="t.7904b1435c0b9f02bbab5574c42006b17b403f32"></a><a id="t.9"></a><table class="c15"><tr class="c10"><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (points &gt; 0)</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector dir = normalize(org - inflictor.origin);</span></p><p class="c1"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Phys_Force(head, 1000, dir * points, org, dir);</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T_RadiusDamageCheck(inflictor, attacker, head, points, multi);</span></p><p class="c1"><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p></td></tr></table><p class="c3"><span class="c8">Cars can now get pushed around by explosions.</span></p><p class="c2"><span class="c8"></span></p><p class="c3"><span>If you want shambler lightning to do damage, open up </span><span class="c22">m_shambler.qc</span><span class="c8">&nbsp;and find the CastLightning function and change the following:</span></p><a id="t.581451db9e3419320bd51ef43a6eb384e0a91464"></a><a id="t.10"></a><table class="c15"><tr class="c10"><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;traceline2(org, self.origin + dir * SHAM_LIGHTNING_RANGE, self, TRACE_NOMONSTERS);</span></p><p class="c1 c13"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClearMultiDamage();</span></p><p class="c1"><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LightningBeam (org, trace_endpos</span><span class="c11">&nbsp;+ dir*4</span><span class="c0">, self, 10);</span></p><p class="c1"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ApplyMultiDamage();</span></p><p class="c1"><span class="c0">}</span></p><p class="c1"><span class="c0">...</span></p></td></tr></table><p class="c2"><span class="c8"></span></p><p class="c3"><span class="c8">And you&rsquo;re done!</span></p><p class="c2"><span class="c8"></span></p><p class="c3"><span class="c27">/ Marko &ldquo;Polo&rdquo; Permanto</span></p></body></html>