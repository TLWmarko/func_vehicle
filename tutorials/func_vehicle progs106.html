<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=MXVwpSGzOOhqOc5hUWJbBLizfYjsfH9XaeDpmRKYJN5bV0WvE1cEyAoIq5yYZlSc');ol{margin:0;padding:0}table td,table th{padding:0}.c21{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:294pt;border-top-color:#000000;border-bottom-style:solid}.c24{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:431.2pt;border-top-color:#000000;border-bottom-style:solid}.c6{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:318.8pt;border-top-color:#000000;border-bottom-style:solid}.c16{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:162.8pt;border-top-color:#000000;border-bottom-style:solid}.c13{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:378.8pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:429pt;border-top-color:#000000;border-bottom-style:solid}.c8{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:294.8pt;border-top-color:#000000;border-bottom-style:solid}.c26{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:393.8pt;border-top-color:#000000;border-bottom-style:solid}.c22{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:213pt;border-top-color:#000000;border-bottom-style:solid}.c23{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Roboto Mono";font-style:normal}.c9{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c25{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c17{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Roboto Mono";font-style:normal}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:italic}.c27{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:26pt;font-family:"Arial";font-style:normal}.c3{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Roboto Mono";font-style:normal}.c18{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c20{-webkit-text-decoration-skip:none;color:#000000;text-decoration:line-through;vertical-align:baseline;text-decoration-skip-ink:none;font-style:normal}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c1{border-spacing:0;border-collapse:collapse;margin-right:auto}.c5{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c7{font-size:9pt;font-family:"Roboto Mono";font-weight:400}.c15{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c14{font-size:9pt;font-family:"Roboto Mono"}.c11{height:0pt}.c12{font-weight:700}.c19{font-style:italic}.c10{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c15 doc-content"><p class="c25 title" id="h.ybaexzawxma4"><span class="c27">func_vehicle</span></p><h2 class="c23" id="h.cv3l656hn6n7"><span class="c18">How to implement func_vehicle 0.1 in progs106</span></h2><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>Add the 6 new files into </span><span class="c12">progs.src</span><span class="c9">&nbsp;between subs.qc and fight.qc, looking like this:</span></p><a id="t.661e07e935ae8724b3e3eb4fae0c06e60a009c2e"></a><a id="t.0"></a><table class="c1"><tr class="c11"><td class="c16" colspan="1" rowspan="1"><p class="c4"><span class="c0">...</span></p><p class="c4"><span class="c0">defs.qc</span></p><p class="c4"><span class="c0">subs.qc</span></p><p class="c4 c10"><span class="c0"></span></p><p class="c4"><span class="c3">maths.qc</span></p><p class="c4"><span class="c3">phys_defs.qc</span></p><p class="c4"><span class="c3">phys_matrix.qc</span></p><p class="c4"><span class="c3">phys_exec.qc</span></p><p class="c4 c10"><span class="c3"></span></p><p class="c4"><span class="c3">func_vehicle.qc</span></p><p class="c4"><span class="c3">func_vehicle_builtins.qc</span></p><p class="c4 c10"><span class="c3"></span></p><p class="c4"><span class="c0">fight.qc</span></p><p class="c4"><span class="c7">...</span></p></td></tr></table><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>Currently the code won&rsquo;t compile without a small change, so start by opening </span><span class="c12">client.qc</span><span>&nbsp;and near the top, remove this line:</span></p><a id="t.1368532d6bb2bb2b89c860d94d43d82b31c34998"></a><a id="t.1"></a><table class="c1"><tr class="c11"><td class="c8" colspan="1" rowspan="1"><p class="c4"><span class="c0">...</span></p><p class="c4"><span class="c0">void (vector org, entity death_owner) spawn_tdeath;</span></p><p class="c4 c10"><span class="c0"></span></p><p class="c4"><span class="c14 c12 c20">float &nbsp; &nbsp;modelindex_eyes, modelindex_player;</span></p><p class="c4 c10"><span class="c0"></span></p><p class="c4"><span class="c0">/*</span></p><p class="c4"><span class="c0">...</span></p></td></tr></table><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>We need to add the same line to the bottom of </span><span class="c12">defs.qc</span><span class="c9">&nbsp;instead:</span></p><a id="t.ee93f9be04ed0af31a32c1f54b26bf31e321d678"></a><a id="t.2"></a><table class="c1"><tr class="c11"><td class="c21" colspan="1" rowspan="1"><p class="c4"><span class="c0">...</span></p><p class="c4"><span class="c0">float(entity targ, entity inflictor) CanDamage;</span></p><p class="c4 c10"><span class="c0"></span></p><p class="c4"><span class="c14 c12">float &nbsp; &nbsp;modelindex_eyes, modelindex_player;</span></p></td></tr></table><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span class="c9">Now we have the vehicle stuff included in the game, next we need to add interactions between the vehicle(s) and the rest.</span></p><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>First we want to add some functionality to </span><span class="c12">client.qc</span><span class="c9">&nbsp;for driving and entering/exiting the vehicle. In PutClientInServer, right below the setmodel stuff, add this:</span></p><a id="t.bdd7a1770a9f4a3db27c5d57b6c4002b2ddf6ffb"></a><a id="t.3"></a><table class="c1"><tr class="c11"><td class="c8" colspan="1" rowspan="1"><p class="c4"><span class="c0">...</span></p><p class="c4"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setmodel (self, &quot;progs/player.mdl&quot;);</span></p><p class="c4"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modelindex_player = self.modelindex;</span></p><p class="c4 c10"><span class="c0"></span></p><p class="c4"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setmodel (self, &quot;progs/null.spr&quot;);</span></p><p class="c4"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modelindex_null = self.modelindex;</span></p><p class="c4 c10"><span class="c3"></span></p><p class="c4"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stuffcmd(self, &quot;chase_active 0\n&quot;);</span></p><p class="c4"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stuffcmd(self, &quot;crosshair 1\n&quot;);</span></p><p class="c4 c10"><span class="c0"></span></p><p class="c4"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setsize (self, VEC_HULL_MIN, VEC_HULL_MAX);</span></p><p class="c4"><span class="c0">...</span></p></td></tr></table><p class="c4"><span class="c9">This is for allowing the player model to be invisible when seated, and resets the chasecam if a player stops playing while seated in a vehicle.</span></p><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>Still in </span><span class="c12">client.qc</span><span class="c9">, move down to PlayerPostThink, and add this at the bottom, under CheckPowerups:</span></p><a id="t.c40c1d56c716dfc4e92aec0986e4b22e04b94558"></a><a id="t.4"></a><table class="c1"><tr class="c11"><td class="c6" colspan="1" rowspan="1"><p class="c5"><span class="c0">...</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CheckPowerups ();</span></p><p class="c5 c10"><span class="c0"></span></p><p class="c5"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">TryUpdateVehicle();</span></p><p class="c5"><span class="c0">};</span></p><p class="c5"><span class="c0">...</span></p></td></tr></table><p class="c4"><span class="c9">This handles the driving when seated in a vehicle.</span></p><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>When the player dies, they need to get tossed out from the vehicle. Open up </span><span class="c12">player.qc</span><span class="c9">&nbsp;and navigate to PlayerDie to add this:</span></p><a id="t.211c4f559b84b25ea6ef09bf656bd656680ba991"></a><a id="t.5"></a><table class="c1"><tr class="c11"><td class="c24" colspan="1" rowspan="1"><p class="c5"><span class="c0">...</span></p><p class="c5"><span class="c0">void() PlayerDie =</span></p><p class="c5"><span class="c0">{</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i;</span></p><p class="c5 c10"><span class="c0"></span></p><p class="c5"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (self.driving)</span></p><p class="c5"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Car_AttachToVehicle(self, self.driving); // will jump out from vehicle immediately</span></p><p class="c5 c10"><span class="c0"></span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.items = self.items - (self.items &amp; IT_INVISIBILITY);</span></p><p class="c5"><span class="c0">...</span></p></td></tr></table><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>Next up we need to add a new impulse so players can enter and exit nearby vehicles. Open up </span><span class="c12">weapons.qc</span><span class="c9">&nbsp;and navigate to ImpulseCommands to add the following:</span></p><a id="t.146ddafa2533ada264cf157dcac68e58a6798d4c"></a><a id="t.6"></a><table class="c1"><tr class="c11"><td class="c22" colspan="1" rowspan="1"><p class="c5"><span class="c0">...</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (self.impulse == 255)</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QuadCheat ();</span></p><p class="c5"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (self.impulse == 50)</span></p><p class="c5"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Car_CheckAttach ();</span></p><p class="c5"><span class="c0">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.impulse = 0;</span></p><p class="c5"><span class="c0">...</span></p></td></tr></table><p class="c4"><span class="c9">You&rsquo;ve successfully added the basic functionality for entering, exiting and driving vehicles! Keep going if you also want to add the ability for monsters to detect you inside a vehicle and shoot at you.</span></p><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>In </span><span class="c12">ai.qc</span><span class="c9">, put this into visible:</span></p><a id="t.b7b7bc1e7b8e97474e98bbb3b48d1a56e3d0b396"></a><a id="t.7"></a><table class="c1"><tr class="c11"><td class="c26" colspan="1" rowspan="1"><p class="c5"><span class="c0">...</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_inopen &amp;&amp; trace_inwater)</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return FALSE; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// sight line crossed contents</span></p><p class="c5 c10"><span class="c0"></span></p><p class="c5"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_fraction &lt; 1 &amp;&amp; trace_ent.owner.driving == targ)</span></p><p class="c5"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return TRUE;</span></p><p class="c5 c10"><span class="c0"></span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_fraction == 1)</span></p><p class="c5"><span class="c0">...</span></p></td></tr></table><p class="c4"><span class="c9">This way monsters can detect players in cars.</span></p><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>In </span><span class="c12">combat.qc</span><span class="c9">, add this to T_RadiusDamage:</span></p><a id="t.8f70b858fb690a21e32bced52b79efde8c395c4e"></a><a id="t.8"></a><table class="c1"><tr class="c11"><td class="c28" colspan="1" rowspan="1"><p class="c5"><span class="c0">...</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (points &gt; 0)</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></p><p class="c5"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vector dir = normalize(org - inflictor.origin);</span></p><p class="c5"><span class="c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Phys_Force(head, 1000, dir * points, org, dir);</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (CanDamage (head, inflictor))</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// shambler takes half damage from all explosions</span></p><p class="c5"><span class="c0">...</span></p></td></tr></table><p class="c4"><span class="c9">Cars can now get pushed around by explosions.</span></p><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>In </span><span class="c12">fight.qc</span><span class="c9">&nbsp;we need to change each *CheckAttack function to support monsters fighting vehicles. This means that each case of:</span></p><a id="t.1983ec5e67096949edd8aff3a907aca8c8300c50"></a><a id="t.9"></a><table class="c1"><tr class="c11"><td class="c13" colspan="1" rowspan="1"><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_ent != targ)</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return FALSE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// don&#39;t have a clear shot</span></p></td></tr></table><p class="c4"><span class="c9">Needs to change into:</span></p><a id="t.aaa300a230e963ee71a6bdecec506d1210b62b91"></a><a id="t.10"></a><table class="c1"><tr class="c11"><td class="c13" colspan="1" rowspan="1"><p class="c5"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (trace_ent != targ</span><span class="c12 c14">&nbsp;&amp;&amp; trace_ent.owner.driving != targ</span><span class="c0">)</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return FALSE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// don&#39;t have a clear shot</span></p></td></tr></table><p class="c4"><span class="c9">There&rsquo;s 4 different cases.</span></p><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span>If you want shambler lightning to do damage, open up </span><span class="c12">shambler.qc</span><span class="c9">&nbsp;and find the CastLightning function and change the following:</span></p><a id="t.392ab7ad78d508c4cbfd305abdf28a388228292d"></a><a id="t.11"></a><table class="c1"><tr class="c11"><td class="c13" colspan="1" rowspan="1"><p class="c5"><span class="c0">...</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WriteCoord (MSG_BROADCAST, trace_endpos_y);</span></p><p class="c5"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WriteCoord (MSG_BROADCAST, trace_endpos_z);</span></p><p class="c5 c10"><span class="c0"></span></p><p class="c5"><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LightningDamage (org, trace_endpos</span><span class="c14 c12">&nbsp;+ dir*4</span><span class="c0">, self, 10);</span></p><p class="c5"><span class="c0">};</span></p><p class="c5"><span class="c0">...</span></p></td></tr></table><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span class="c9">And you&rsquo;re done!</span></p><p class="c4 c10"><span class="c9"></span></p><p class="c4"><span class="c19">/ Marko &ldquo;Polo&rdquo; Permanto</span></p></body></html>